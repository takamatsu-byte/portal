// クライアントの生成設定（そのまま）
generator client {
  provider = "prisma-client-js"
}

// データベース接続設定（そのまま）
datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// ▼ ここから下を貼り付けてください ▼

// 1. 収益物件データの設計図
model Project {
  id                String   @id @default(cuid())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  code              String
  propertyAddress   String
  
  projectTotal      Int?
  expectedRent      Int?
  expectedYieldBp   Int?
  agentRent         Int?
  surfaceYieldBp    Int?
  expectedSalePrice Int?
  propertyPrice     Int?
  
  acquisitionCost   Int?
  
  expenses          ExpenseItem[]
}

// 収益物件の経費内訳
model ExpenseItem {
  id        String  @id @default(cuid())
  name      String
  price     Int
  
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String
}


// 2. 仲介・紹介案件データの設計図
model BrokerageProject {
  id                String   @id @default(cuid())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  code              String
  propertyAddress   String
  
  // ★追加した新しい項目（売上・日付）
  sales             Int?
  contractDate      String?
  settlementDate    String?
  
  acquisitionCost   Int?
  
  // エラー防止のため古い項目も定義だけ残しておく
  projectTotal      Int?
  expectedRent      Int?
  expectedYieldBp   Int?
  agentRent         Int?
  surfaceYieldBp    Int?
  expectedSalePrice Int?
  propertyPrice     Int?

  expenses          BrokerageExpenseItem[]
}

// 仲介・紹介案件の経費内訳
model BrokerageExpenseItem {
  id        String  @id @default(cuid())
  name      String
  price     Int
  
  project   BrokerageProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String
}
// 3. 転売案件データの設計図
model ResaleProject {
  id                String   @id @default(cuid())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  code              String
  propertyAddress   String   @default("-")
  
  propertyPrice     Int?     // 物件価格
  acquisitionCost   Int?     // 買取経費
  projectTotal      Int?     // 総額
  expectedSalePrice Int?     // 想定販売価格

  expenses          ResaleExpenseItem[]
}

// 転売案件の経費内訳
model ResaleExpenseItem {
  id        String        @id @default(cuid())
  name      String
  price     Int
  
  project   ResaleProject @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String
}